name: Sincronizar a GitLab

on:
  push:
    branches:
      - master
  workflow_dispatch:

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Empujar a GitLab
        env:
          # Tu usuario real de GitLab
          USERNAME: "aichumailla"
          # El token secreto que guardaste en GitHub
          TOKEN: ${{ secrets.GEOGAS }}
          # La parte de la URL despu√©s de "https://gitlab.com/"
          # Es IMPORTANTE que coincida con la estructura Grupo/Proyecto
          GITLAB_PATH: "eliasbuenosdias1-group/GeoGas.git"
        run: |
          # Construimos la URL completa con credenciales incrustadas
          # Formato: https://USUARIO:TOKEN@gitlab.com/GRUPO/PROYECTO.git
          REMOTE_URL="https://${USERNAME}:${TOKEN}@gitlab.com/${GITLAB_PATH}"
          
          echo "Configurando remoto GitLab..."
          git remote add gitlab "$REMOTE_URL"
          
          echo "Empujando cambios a la rama master..."
          git push gitlab master --force

          echo "Empujando tags..."
          git push gitlab --tags --force
